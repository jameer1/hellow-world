<section class="content-header">
    <h1>Leave Approval</h1>
    <!-- <input type="submit" value ="Help !"
		ng-click="helpPage();" class="pull-right btn  btn-primary btn-sm help-each-page"> -->
		<button class="pull-right btn btn-primary btn-sm help-each-page" 
	onclick="window.open('views/helptutorials/MaterialsTransfer1.html', '_blank', 
		'toolbar=yes,scrollbars=yes,resizable=no,top=50,left=100,width=1400,height=700')">
		Help
	</button>
</section>
<section class="content" id="tab-pannel">
    <div id="tab-pannel" class="panel-group">
        <div class="panel panel-default block footer-parent" id="res-emp">
            <div class="panel-body topTableResHeight">
                <div ng-if="account.appCodeTemplate['RESOURCE_EMPLEAVEAPPROVAL_VIEW'] || account.appCodeTemplate['APPROVE_EMPLEAVEAPPROVAL_VIEW']">
                    <div ng-controller="EmpLeaveApprovalController" id="tab-pannel" >
					   <form name="leaveRequestForm">
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 no-padding">
                                <div class="col-lg-3 col-md-3 col-xs-3 col-sm-3 padL-0">
                                    <md-input-container class="md-block">
										<label>EPS ID/Name</label>
										<input data-test='Resources_Employee_EpsSelect' type="text" readonly autocomplete="off"
											ng-model="searchProject.parentName" ng-click="getUserProjects()" class="form-control">
									</md-input-container>
                                </div>
                                <div class="col-lg-3 col-md-3 col-xs-3 col-sm-3">
                                    <md-input-container>
										<label>Project ID/Name</label> 
										<input type="text" ng-model="searchProject.projName" readonly autocomplete="off"
											ng-click="getUserProjects()">
									</md-input-container>
                                </div>
                                <div class="col-lg-6 col-md-6 col-xs-6 col-sm-6 padR-0">
                                    <div class="pull-right marT15">
                                        <input data-test='Resources_Employee_LeaveApproval_Search' type="button"
                                          ng-click="employeeSearch('click');" class="btn btn-primary btn-sm"
                                            value="Search">
                                        <input type="button" ng-click="reset()" class="btn btn-default btn-sm"
                                            value="Reset">
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 no-padding">
                            <div class="doubleHeaderTableResHeight_topB">
                                <table id="tree" class="table table-striped table-hover table-bordered topTableHeight">
                                   <!--  <thead id="tab-head">
                                        <tr>
                                            <th>Select</th>
                                            <th>Date of Request</th>
                                            <th>Leave Application ID</th>
                                            <th>Start Date</th>
                                            <th>Finish Date</th>
                                            <th>Number of work Days</th>
                                            <th>Approver Name</th>
                                            <th>Notification ID</th>
                                            <th>Approval Status</th>
                                            <th>Leave Availed or Not availed</th>
                                            <th class="text-center">More Details</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr fixed-header="" ng-repeat="approval in empLeaveReqApprTOs">
                                            <td><input type="checkbox" value="id"
                                                    data-test='Resources_Employee_LeaveApproval_SelectEmployee'
                                                    ng-model="approval.select"
                                                    ng-change="newRequestRowSelect(approval)">
                                            </td>
                                            <td>{{approval.reqDate}}</td>
                                            <td>{{approval.reqCode}}</td>
                                            <td>{{approval.startDate}}</td>
                                            <td>{{approval.endDate}}</td>
                                            <td>{{approval.totalDays}}</td>
                                            <td>{{approval.apprUserTO.firstName}}
                                                {{approval.apprUserTO.lastName}}</td>
                                            <td>{{approval.notifyCode}}</td>
                                            <td>{{approval.apprStatus}}</td>
                                            <td>{{approval.leaveAvailed}}</td>
                                            <td class="text-center"><input type="button" class="btn btn-primary btn-sm"
                                                    data-test='Resources_Employee_LeaveApproval_MoreDetailsView'
                                                    ng-click="editLeaveapproval(approval)" value="View" /></td>
                                        </tr>
                                    </tbody> -->
                                    <thead id="tab-head">
                                    	<tr>
                                    		<th rowspan="2">Select</th>
                                    		<th rowspan="2">Employee ID</th>
                                    		<th rowspan="2">First Name</th>
                                    		<th rowspan="2">Last Name</th>
                                    		<th rowspan="2">Parent Company</th>
                                    		<th colspan="7" class="text-center">
                                    			<span ng-show="empDatamoreFlag==0">Employee Details
                                    			<span class="fa fa-caret-right" style="float:right; font-size:20px; color: #337ab7 !important;"
                                    				ng-click="clickForwardempData(empDatamoreFlag);"></span>
                                    			</span>
                                    			<span ng-show="empDatamoreFlag==1">
                                    			<span class="fa fa-caret-left" style="float: left; font-size: 20px; color: #337ab7 !important;"
                                    				ng-click="clickBackwardempData(empDatamoreFlag);"></span>
                                    				Current Status
                                    			</span>
                                    		</th>
                                    		</tr>
                                    	<tr>
                                    	<th><span ng-show="empDatamoreFlag==0">Gender</span>
                                    		<span ng-show="empDatamoreFlag==1">EPS</span>
                                    	</th>
                                    	<th style="width: 12em;"><span ng-show="empDatamoreFlag==0">Date Of Birth</span>
                                    		<span ng-show="empDatamoreFlag==1">Current/Last Project</span>
                                    	</th>
                                    	<th style="width: 16em;"><span ng-show="empDatamoreFlag==0">Designation</span>
                                    		<span ng-show="empDatamoreFlag==1">Employee Current Status</span>
                                    	</th>
                                    	<th style="width:10em;"><span ng-show="empDatamoreFlag==0">Local or Non-Local</span>
                                    		<span ng-show="empDatamoreFlag==1">Mobilization Data</span>
                                    	</th>
                                    	<th style="width: 12em;"><span ng-show="empDatamoreFlag==0">Existing or New Employee</span>
                                    		<span ng-show="empDatamoreFlag==1">Expected <br>De-Mobilization Date</span>
                                    	</th>
                                    	<th style="width:8em;"><span ng-show="empDatamoreFlag==0">Employment Type</span>
                                    		<span ng-show="empDatamoreFlag==1">Actual <br>De-Mobilization Date</span>
                                    	</th>
                                    	<th style="width:8em;"><span ng-show="empDatamoreFlag==0">Date of Enrolment</span>
                                    		<span ng-show="empDatamoreFlag==1">Records of<br>Employee Documents</span>
                                    	</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    	<tr fixed-header="" data-test='Resources_Employee_EnrollmentTab_Selectemployee' ng-repeat="employee in empDetails" ng-class="{'active':account.appCodeTemplate[projTabs.empappCodeTemplateKey]
													&&  isActiveTab(projTabs.url),'disabled': !account.appCodeTemplate[projTabs.empappCodeTemplateKey]}">
                                    		<td><input type="checkbox" value="id" ng-model="employee.selected" ng-change="rowSelect($index, employee)" /></td>
                                    		<td ng-click="getEmployeeDetails(empDetails, $index, employee)"
                                    			ng-class="{selected: $index==selectedRow}">{{employee.empCode}}</td>
                                    		<td ng-click="getEmployeeDetails(empDetails, $index, employee)"
                                    			ng-class="{selected: $index==selectedRow}">{{employee.firstName}}</td>
                                    		<td ng-click="getEmployeeDetails(empDetails, $index, employee)"
                                    			ng-class="{selected: $index==selectedRow}">{{employee.lastName}}</td>
                                    		<td ng-click="getEmployeeDetails(empDetails, $index, employee)"
                                    			ng-class="{selected: $index==selectedRow}">{{employee.cmpName}}</td>
                                    		<td ng-click="getEmployeeDetails(empDetails, $index, employee)"
                                    			ng-class="{selected: $index==selectedRow}">
                                    			<span ng-show="empDatamoreFlag==0">{{employee.gender}}</span>
                                    			<span ng-show="empDatamoreFlag==1">{{employee.projEmpRegisterTO.parentName}}</span>
                                    		</td>
                                    		<td ng-click="getEmployeeDetails(empDetails, $index, employee)"
                                    			ng-class="{selected: $index==selectedRow}">
                                    			<span ng-show="empDatamoreFlag==0">{{employee.dob | date}}</span>
                                    			<span ng-show="empDatamoreFlag==1">{{employee.projEmpRegisterTO.name}}</span>
                                    		</td>
                                    		<td ng-click="getEmployeeDetails(empDetails, $index, employee)"
                                    			ng-class="{selected: $index==selectedRow}">
                                    			<span ng-show="empDatamoreFlag==0">{{employee.empClassName}}</span>
                                    			<span ng-show="empDatamoreFlag==1">{{employee.projEmpRegisterTO.empStatus}}</span>
                                    		</td>
                                    		<td ng-click="getEmployeeDetails(empDetails, $index, employee)"
                                    			ng-class="{selected: $index==selectedRow}">
                                    			<span ng-show="empDatamoreFlag==0">{{employee.location}}</span>
                                    			<span ng-show="empDatamoreFlag==1">{{employee.projEmpRegisterTO.mobilaizationDate}}</span>
                                    		</td>
                                    		<td ng-click="getEmployeeDetails(empDetails, $index, employee)"
                                    			ng-class="{selected: $index==selectedRow}">
                                    			<span ng-show="empDatamoreFlag==0">{{employee.empStatus}}</span>
                                    			<span ng-show="empDatamoreFlag==1">{{employee.projEmpRegisterTO.expecteddeMobilaizationDate}}</span>
                                    		<td ng-click="getEmployeeDetails(empDetails, $index, employee)"
                                    			ng-class="{selected: $index==selectedRow}">
                                    			<span ng-show="empDatamoreFlag==0">{{employee.procurecatgName}}</span>
                                    			<span ng-show="empDatamoreFlag==1">{{employee.projEmpRegisterTO.deMobilaizationDate}}</span>
                                    		</td>
                                    		<td ng-click="getEmployeeDetails(empDetails, $index, employee)"
                                    			ng-class="{selected: $index==selectedRow}">
                                    			<span ng-show="empDatamoreFlag==0">{{employee.projEmpRegisterTO.enrollmentDate}}</span>
                                    			<span ng-show="empDatamoreFlag==1" class="fa fa-download" ng-if="employee.projEmpRegisterTO.taxFileNum"></span>
                                    	</tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default bottomPanelBlock footer-parent" id="emp-tabs">
                                	<div class="panel-body">
                                		<div class="nav-tabs-custom">
                                			<ul class="nav nav-tabs">
                                				<li fixed-header="" ng-class="{'active':account.appCodeTemplate[projTabs.empappCodeTemplateKey]
													&&  isActiveTab(projTabs.url),'disabled': !account.appCodeTemplate[projTabs.empappCodeTemplateKey]}">
													<a data-toggle="tab" ng-if="account.appCodeTemplate[projTabs.empappCodeTemplateKey]"
													 ng-click="onClickTab(projTabs)" data-test="{{projTabs.empseleniumlocator}}"><span>{{projTabs.title}}</span></a>
                                			</ul>
                                			<div class="tab-content">
                                				<div ng-include="currentTab"></div>
                                			</div>
                                		</div>
                                	</div>
                                <!-- child table comes here -->
                                </div>
</section>