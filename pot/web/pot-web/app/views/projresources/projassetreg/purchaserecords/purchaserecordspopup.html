<div id="tab-pannel" class="panel-group">
	<form name="purchaseForm" validate>
		<div class="panel panel-default" modal-movable>
			<div class="panel-heading">
				<h4 class="panel-title" ng-show="action=='Add'">Add Purchase Records</h4>
				<h4 class="panel-title" ng-show="action=='Edit'">Edit Purchase Records</h4>

			</div>
			<div class="panel-body">
				<div class="topTableResHeight" style="overflow: auto">
					<table class="table table-striped table-bordered topTableHeight">
						<thead id="tab-head">
							<tr>
								<!-- <th ng-show="action=='Add'" class="text-center">Select</th> -->
								<th class="text-center">Date of Purchase
									<span class="procurment-pot-errors">*</span>
								</th>
								<th class="text-center">Purchase Type
									<span class="procurment-pot-errors">*</span>
								</th>
								<th class="text-center">Vendor Name
									<span class="procurment-pot-errors">*</span>
								</th>
								<th class="text-center">Vendor Address
									<span class="procurment-pot-errors">*</span>
								</th>
								<th class="text-center">Land - Survey LOT Details</th>
								<th class="text-center">LOT Identification Details</th>
								<th class="text-center">Land Size and Dimensions</th>
								<th class="text-center">Structure Details</th>
								<th class="text-center">Plant & Equipment Details</th>
								<th class="text-center">Land Register Office Details</th>
								<th class="text-center">Land Valuation
									<span class="procurment-pot-errors">*</span>
								</th>
								<th class="text-center">Structure Valuation
									<span class="procurment-pot-errors">*</span>
								</th>
								<th class="text-center">Plant & Equipment Valuation
									<span class="procurment-pot-errors">*</span>
								</th>
								<th class="text-center">Total Valuation</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="asset in purchaseRecord">
								<!-- <td ng-show="action =='Add'">
									<ng-form name="selectboxForm">
										<input type="checkbox" value="asset.id" ng-model="asset.selected"
											data-test="AddPurchaseRecords_Create_PopUp_Checkbox"
											ng-change="assetPurchaseRecordPopUpRowSelect(asset)"></ng-form>
								</td> -->
								<td>
									<ng-form name="dateForm">
										<potdate-picker custom-read-only ng-model="asset.dateOfPurchase"
											dir-index="$index" data-test="AddPurchaseRecords_Create_PopUp_Date"
											date-name="date" placeholder="dd-mm-yyyy" class="form-control" ng-required="true" min-date="asset.plantCommissioningDate" />
									</ng-form>
								</td>

								<td><select ng-model="asset.purchaseType" ng-required="true"
										data-test="AddPurchaseRecords_Create_PopUp_PurchaseType" tabindex="-1"
										class="form-control">
										<option value="">-Select-</option>
										<option fixed-header="" ng-repeat="purchaseType in purchaseTypes">
											{{purchaseType.name}}</option>
									</select></td>

								<td class="input-width2">
									<ng-form name="vendorNameForm">
										<input type="text" name="vendorName" ng-model="asset.vendorName"
											placeholder="Vendor Name" tabindex="-1" maxlength="50" ng-required="true"
											data-test="AddPurchaseRecords_Create_PopUp_VendorName"
											pattern=[^\w\d]*((.*[A-Za-z]+.*)|[A-Za-z]+.*([0-9]+.*)) minlength="2"
											class="form-control"> <span class="procurment-pot-errors"
											ng-show="vendorNameForm.vendorName.$error.pattern">Alpha
											numeric data should be allowed</span> <span class="procurment-pot-errors"
											ng-show="vendorNameForm.vendorName.$dirty && vendorNameForm.vendorName.$error.required">Vendor
											Name is mandatory</span> <span class="procurment-pot-errors"
											ng-show="vendorNameForm.vendorName.$error.maxlength">Enter
											length between 2 to 50 characters only</span> <span class="procurment-pot-errors"
											ng-show="vendorNameForm.vendorName.$error.minlength">Too
											short!</span> </ng-form>
								</td>

								<td>
									<ng-form name="vendorAddressForm"> <input type="text" name="vendorAddress"
											ng-model="asset.vendorAddress" placeholder="Vendor Address" tabindex="-1" ng-required="true"
											maxlength="50" data-test="AddPurchaseRecords_Create_PopUp_VendorAddress"
											pattern=[^\w\d]*((.*[A-Za-z]+.*)|[A-Za-z]+.*([0-9]+.*)) minlength="2"
											class="form-control"> <span class="procurment-pot-errors"
											ng-show="vendorAddressForm.vendorAddress.$error.pattern">Alpha
											numeric data should be allowed</span> <span class="procurment-pot-errors"
											ng-show="vendorAddressForm.vendorAddress.$dirty && vendorAddressForm.vendorAddress.$error.required">Vendor
											Address is mandatory</span> <span class="procurment-pot-errors"
											ng-show="vendorAddressForm.vendorAddress.$error.maxlength">Enter
											length between 2 to 50 characters only</span> <span class="procurment-pot-errors"
											ng-show="vendorAddressForm.vendorAddress.$error.minlength">Too
											short!</span> </ng-form>
								</td>

								<td>
									<ng-form name="surveyDetailsForm"> <input type="text" name="surveyDetails"
											ng-model="asset.landSurveyLotDetails"
											data-test="AddPurchaseRecords_Create_PopUp_Land_SurveyLOTDetails"
											placeholder="Survey Details" tabindex="-1" maxlength="50"
											pattern=[^\w\d]*((.*[A-Za-z]+.*)|[A-Za-z]+.*([0-9]+.*)) minlength="2"
											class="form-control"> <span class="procurment-pot-errors"
											ng-show="surveyDetailsForm.surveyDetails.$error.pattern">Alpha
											numeric data should be allowed</span> <span class="procurment-pot-errors"
											ng-show="surveyDetailsForm.surveyDetails.$dirty && surveyDetailsForm.surveyDetails.$error.required">Survey
											Details is mandatory</span> <span class="procurment-pot-errors"
											ng-show="surveyDetailsForm.surveyDetails.$error.maxlength">Enter
											length between 2 to 50 characters only</span> <span class="procurment-pot-errors"
											ng-show="surveyDetailsForm.surveyDetails.$error.minlength">Too
											short!</span> </ng-form>
								</td>

								<td>
									<ng-form name="identificationDetailsForm"> <input type="text"
											name="identificationDetails" ng-model="asset.lotIdentificationDetails"
											placeholder="Identification Details" tabindex="-1" maxlength="50"
											data-test="AddPurchaseRecords_Create_PopUp_LOT_IdentificationDetails"
											pattern=[^\w\d]*((.*[A-Za-z]+.*)|[A-Za-z]+.*([0-9]+.*)) minlength="2"
											class="form-control"> <span class="procurment-pot-errors"
											ng-show="identificationDetailsForm.lotIdentificationDetails.$error.pattern">Alpha
											numeric data should be allowed</span> <span class="procurment-pot-errors"
											ng-show="identificationDetailsForm.lotIdentificationDetails.$dirty && identificationDetailsForm.lotIdentificationDetails.$error.required">Identification
											Details is mandatory</span> <span class="procurment-pot-errors"
											ng-show="identificationDetailsForm.lotIdentificationDetails.$error.maxlength">Enter
											length between 2 to 50 characters only</span> <span class="procurment-pot-errors"
											ng-show="identificationDetailsForm.lotIdentificationDetails.$error.minlength">Too
											short!</span> </ng-form>
								</td>

								<td class="input-width2">
									<ng-form name="landSizeForm">
										<input type="text" name="landSize" tabindex="-1"
											ng-model="asset.landSizeAndDimesions" placeholder="Land Size" maxlength="50"
											data-test="AddPurchaseRecords_Create_PopUp_LandSizeandDimensions"
											pattern="^[A-Za-z0-9]+$" ng-pattern-restrict minlength="2"
											class="form-control"> <span class="procurment-pot-errors"
											ng-show="landSizeForm.landSizeAndDimesions.$error.pattern">Alpha
											numeric data should be allowed</span> <span class="procurment-pot-errors"
											ng-show="landSizeForm.landSizeAndDimesions.$dirty && landSizeForm.landSizeAndDimesions.$error.required">Land
											Size is mandatory</span> <span class="procurment-pot-errors"
											ng-show="landSizeForm.landSize.$error.maxlength">Enter
											length between 2 to 50 characters only</span> <span class="procurment-pot-errors"
											ng-show="landSizeForm.landSize.$error.minlength">Too
											short!</span> </ng-form>
								</td>

								<td>
									<ng-form name="structureDetailsForm"> <input type="text" name="structureDetails"
											ng-model="asset.structureDetails"
											data-test="AddPurchaseRecords_Create_PopUp_StructureDetails"
											placeholder="Structure Details" tabindex="-1" maxlength="50"
											pattern=[^\w\d]*((.*[A-Za-z]+.*)|[A-Za-z]+.*([0-9]+.*)) minlength="2"
											class="form-control"> <span class="procurment-pot-errors"
											ng-show="structureDetailsForm.structureDetails.$error.pattern">Alpha
											numeric data should be allowed</span> <span class="procurment-pot-errors"
											ng-show="structureDetailsForm.structureDetails.$dirty && structureDetailsForm.structureDetails.$error.required">Structure
											Details is mandatory</span> <span class="procurment-pot-errors"
											ng-show="structureDetailsForm.structureDetails.$error.maxlength">Enter
											length between 2 to 50 characters only</span> <span class="procurment-pot-errors"
											ng-show="structureDetailsForm.structureDetails.$error.minlength">Too
											short!</span> </ng-form>
								</td>
								<td>
									<ng-form name="plantDetailsForm"> <input type="text" name="plantDetails"
											data-test="AddPurchaseRecords_Create_PopUp_PlantEquipmentDetails"
											ng-model="asset.plantAndEquipmentDetails" placeholder="Plant Details"
											tabindex="-1" maxlength="50"
											pattern=[^\w\d]*((.*[A-Za-z]+.*)|[A-Za-z]+.*([0-9]+.*)) minlength="2"
											class="form-control"> <span class="procurment-pot-errors"
											ng-show="plantDetailsForm.plantDetails.$error.pattern">Alpha
											numeric data should be allowed</span> <span class="procurment-pot-errors"
											ng-show="plantDetailsForm.plantAndEquipmentDetails.$dirty && plantDetailsForm.plantAndEquipmentDetails.$error.required">Plant
											Details is mandatory</span> <span class="procurment-pot-errors"
											ng-show="plantDetailsForm.plantAndEquipmentDetailsils.$error.maxlength">Enter
											length between 2 to 50 characters only</span> <span class="procurment-pot-errors"
											ng-show="plantDetailsForm.plantAndEquipmentDetails.$error.minlength">Too
											short!</span> </ng-form>
								</td>
								<td>
									<ng-form name="regOfficeDetailsForm"> <input type="text" name="regOfficeDetails"
											data-test="AddPurchaseRecords_Create_PopUp_LandRegisterOfficeDetails"
											ng-model="asset.landRegisterOfficeDetails"
											placeholder="Register Office Details" maxlength="50"
											pattern=[^\w\d]*((.*[A-Za-z]+.*)|[A-Za-z]+.*([0-9]+.*)) minlength="2"
											tabindex="-1" class="form-control"> <span class="procurment-pot-errors"
											ng-show="regOfficeDetailsForm.regOfficeDetails.$error.pattern">Alpha
											numeric data should be allowed</span> <span class="procurment-pot-errors"
											ng-show="regOfficeDetailsForm.landRegisterOfficeDetailss.$dirty && regOfficeDetailsForm.landRegisterOfficeDetails.$error.required">Registered
											Office Details is mandatory</span> <span class="procurment-pot-errors"
											ng-show="regOfficeDetailsForm.landRegisterOfficeDetails.$error.maxlength">Enter
											length between 2 to 50 characters only</span> <span class="procurment-pot-errors"
											ng-show="regOfficeDetailsForm.landRegisterOfficeDetails.$error.minlength">Too
											short!</span> </ng-form>
								</td>

								<td>
									<ng-form name="landValuationForm"> <input type="text" name="landValudation"
											maxlength="10" ng-change="calcTotalSaleAmount(asset)"
											data-test="AddPurchaseRecords_Create_PopUp_LandValuation"
											ng-model="asset.landValuation" class="form-control" valid-number
											placeholder="Land Valuation" tabindex="-1" ng-required="true"
											ng-pattern="/^[0-9]+$/">
										<span ng-show="landValuationForm.landValudation.$error.pattern" class="procurment-pot-errors">The value is not
											a valid integer</span></ng-form>
								</td>

								<td>
									<ng-form name="structureValuationForm"> <input type="text" maxlength="10"
											ng-model="asset.structureValuation" class="form-control"
											name="structureValuation" valid-number
											data-test="AddPurchaseRecords_Create_PopUp_StructureValuation"
											ng-change="calcTotalSaleAmount(asset)" tabindex="-1"
											placeholder="Structure Valuation" ng-required="true"
											ng-pattern="/^[0-9]+$/">
										<span ng-show="structureValuationForm.structureValuation.$error.pattern" class="procurment-pot-errors">The
											value is not a valid integer</span>
									</ng-form>
								</td>

								<td>
									<ng-form name="plantValuationForm"> <input type="text"
											ng-model="asset.plantAndEquipmentValuation" maxlength="10"
											name="plantEquipmentValutaion" valid-number
											data-test="AddPurchaseRecords_Create_PopUp_PlantEquipmentValuation"
											ng-change="calcTotalSaleAmount(asset)" placeholder="Plant Valuation"
											class="form-control" tabindex="-1" ng-required="true"
											ng-pattern="/^[0-9]+$/">
										<span ng-show="plantValuationForm.plantEquipmentValutaion.$error.pattern" class="procurment-pot-errors">The
											value is not a valid integer</span>
									</ng-form>
								</td>

								<td>
									<ng-form name="totalValuationForm"> <input type="text"
											ng-model="asset.totalValuation" name="totalValuation"
											placeholder="TotalValuation" maxlength="10" class="form-control"
											pattern="^[\d\.,%]+$" tabindex="-1" ng-required="true" disabled /></ng-form>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="topTableResHeight" style="overflow: auto">
					<table class="table table-striped table-bordered topTableHeight">
						<thead id="tab-head">
							<tr>
								<th class="text-center">Total Purchase Amount
									<span class="procurment-pot-errors">*</span>
								</th>
								<th class="text-center">Initial Margin Amount Paid
									<span class="procurment-pot-errors">*</span>
								</th>
								<th class="text-center">Tax Amount With Held if Any</th>
								<th class="text-center">Mortgage/Loan Amount
									<span class="procurment-pot-errors">*</span>
								</th>
								<th class="text-center">Loan Availed From</th>
								<th class="text-center">Loan Period</th>
								<th class="text-center">Fixed/Variable Rate</th>
								<th class="text-center">Annual Rate</th>
								<th class="text-center">Buyer Solicitor</th>
								<th class="text-center">Vendor Solicitor</th>
								<th>Purchase Records<br>(Upload & View)
								</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="asset in purchaseRecord">
								<td>
									<ng-form name="totalPurchaseAmountForm"> <input
											data-test="AddPurchaseRecords_Create_PopUp_TotalPurchaseAmount" type="text"
											ng-model="asset.totalPurchaseAmount" maxlength="10" ng-required="true" valid-number
											name="totalPurchaseAmount" placeholder="TotalPurchaseAmount"
											class="form-control" tabindex="-1" ng-pattern="/^[0-9]+$/">
										<span ng-show="totalPurchaseAmountForm.totalPurchaseAmount.$error.pattern" class="procurment-pot-errors">The
											value is not a valid integer</span>
									</ng-form>
								</td>

								<td class="input-width2">
									<ng-form name="initialAmountMarginPaidForm"> <input type="text"
											ng-model="asset.initialMarginAmountPaid" name="initialMarginAmountPaid"
											data-test="AddPurchaseRecords_Create_PopUp_InitialMarginAmountPaid"
											placeholder="Initial Amount Paid" maxlength="10" tabindex="-1" valid-number
											ng-required="true" class="form-control" ng-pattern="/^[0-9]+$/">
										<span
											ng-show="initialAmountMarginPaidForm.initialMarginAmountPaid.$error.pattern" class="procurment-pot-errors">The
											value is not a valid integer</span>
									</ng-form>
								</td>

								<td class="input-width2">
									<ng-form name="taxAmountWithHeldForm">
										<input type="text" ng-model="asset.taxAmountWithHeld" name="taxAmountWithHeld" placeholder="Tax Amount With Held" maxlength="10"
										tabindex="-1" class="form-control" ng-pattern="/^[0-9]+$/" valid-number>
										<span ng-show="taxAmountWithHeldForm.taxAmountWithHeld.$error.pattern" class="procurment-pot-errors">
											The value is not a valid integer
										</span>
									</ng-form>
								</td>

								<td class="input-width2">
									<ng-form name="loanamountForm">
										<input type="text" ng-model="asset.loanAmount" name="loanamount"
											data-test="AddPurchaseRecords_Create_PopUp_MortgageLoanAmount" valid-number
											placeholder="Loan Amount" pattern="^[\d\.,%]+$" tabindex="-1" maxlength="10"
											ng-required="true" class="form-control" ng-pattern="/^[0-9]+$/">
										<span ng-show="loanamountForm.loanamount.$error.pattern" class="procurment-pot-errors">The value is not a
											valid integer</span>
									</ng-form>
								</td>
								<td class="input-width2">
									<ng-form name="loanavailedForm">
										<input type="text" ng-model="asset.loanAvailedFrom" name="loanamount"
											placeholder="Loan Availed From"
											data-test="AddPurchaseRecords_Create_PopUp_LoanAvailedFrom"
											pattern=[^\w\d]*((.*[A-Za-z]+.*)|[A-Za-z]+.*([0-9]+.*)) tabindex="-1"
											class="form-control" /> <span class="procurment-pot-errors"
											ng-show="loanavailedForm.loanAvailedFrom.$dirty && loanavailedForm.loanAvailedFrom.$error.required">
											Loan Availed From</span> <span class="procurment-pot-errors"
											ng-show="loanavailedForm.loanAvailedFromt.$error.pattern">Alpha
											numeric data should be allowed</span> <span class="procurment-pot-errors"
											ng-show="loanavailedForm.loanAvailedFrom.$error.minlength">Too
											Short!</span> </ng-form>
								</td>
								<td class="input-width2">
									<ng-form name="loanPeriodForm">
										<input type="text" ng-model="asset.loanPeriod" name="loanPeriod"
											data-test="AddPurchaseRecords_Create_PopUp_LoanPeriod"
											placeholder="Loan Period(Years)" pattern="^[\d\.,%]+$" tabindex="-1"
											class="form-control" /> <span class="procurment-pot-errors"
											ng-show="loanPeriodForm.loanPeriod.$dirty && loanPeriodForm.loanPeriod.$error.required">
											Loan Period is mandatory</span>  <span class="procurment-pot-errors"
											ng-show="loanavailedForm.loanAvailedFromt.$error.pattern">Alpha
											numeric data should be allowed</span> <span class="procurment-pot-errors"
											ng-show="loanPeriodForm.loanPeriod.$error.minlength">Too
											Short!</span> </ng-form>
								</td>
								<td><select ng-model="asset.fixedRateOfInterest"
										data-test="AddPurchaseRecords_Create_PopUp_FixedVariableRate"
										tabindex="-1" class="form-control">
										<option value="">-Select-</option>
										<option fixed-header="" ng-repeat="interestType in interestTypes">
											{{interestType.name}}</option>
									</select></td>

								<td class="input-width2">
									<ng-form name="annualrateofinterestForm"> <input type="text"
											ng-model="asset.annualRateOfInterest" valid-number
											data-test="AddPurchaseRecords_Create_PopUp_AnnualRate"
											name="annualRateOfInterest" placeholder="Annual Rate"
											pattern="^[\d\.,%]+$" tabindex="-1" maxlength="4"
											class="form-control" /> <span class="procurment-pot-errors"
											ng-show="annualrateofinterestForm.annualRateOfInterest.$dirty && annualrateofinterestForm.annualRateOfInterest.$error.required">Total
											AnnualRateOfInterest is mandatory</span> <span class="procurment-pot-errors"
											ng-show="annualrateofinterestForm.annualRateOfInterest.$error.pattern">Enter
											only numbers</span> <span class="procurment-pot-errors"
											ng-show="annualrateofinterestForm.annualRateOfInterest.$error.minlength">Too
											Short!</span> </ng-form>
								</td>

								<td>
									<ng-form name="buyerSolicitorForm"> <input
											data-test="AddPurchaseRecords_Create_PopUp_BuyerSolicitor" type="text"
											name="buyerSolicitor" maxlength="50" ng-model="asset.buyerSolicitor"
											tabindex="-1" class="form-control" placeholder="Buyer Solicitor"></ng-form>
								</td>

								<td>
									<ng-form name="vendorSolicitorForm"> <input
											data-test="AddPurchaseRecords_Create_PopUp_VendorSolicitor" type="text"
											name="vendorSolicitor" class="form-control" maxlength="50"
											ng-model="asset.vendorSolicitor" placeholder="Vendor Solicitor"
											tabindex="-1"></ng-form>
								</td>

								<td>
									<ng-form name="vendorSolicitorForm"> <input
											data-test='AddPurchaseRecords_Create_PopUp_UploadFile'
											ng-model="asset.fileInfo" ng-disabled="isDisabled" type="file"
											fileread="purchaseDoc" name="file" ngf-select="checkFile($file)"
											ngf-accept="'*'" tabindex="20"> <span class="help-block" style="color: red"
											ng-show="!asset.purchaseDoc.isValid">
											{{purchaseDoc.errorMessage}}</span> </ng-form>
								</td>


							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<div class="panel-footer">
				<!-- <div class="pull-left">
					<input type="submit" class="btn btn-primary  btn-sm"
						ng-click="addRows()" value="Add" ng-show="action =='Add'">
					<input type="button" class="btn btn-secondary  btn-sm"
						ng-click="deleteRows()" value="Delete" ng-show="action =='Add'">
				</div> -->
				<div class="pull-right">
					<input type="submit" class="btn btn-primary  btn-sm" ng-click="purchaseForm.$valid && save()" value="Save"
						data-test="AddPurchaseRecords_Create_PopUp_Save">
				</div>
			</div>
		</div>
		<div class="ngdialog-close"></div>
	</form>
</div>
